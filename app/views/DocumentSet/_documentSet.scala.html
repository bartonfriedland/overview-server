@(
  documentSet: org.overviewproject.tree.orm.DocumentSet,
  viewer: OverviewUser
)(implicit lang: play.api.i18n.Lang)

@import views.helper.DocumentSetHelper

@defining(scopedMessages("views.DocumentSet._documentSet")) { m =>
  <li id="document-set-@documentSet.id">
    <form method="post" class="delete form-inline" data-confirm="@m("confirm_delete")" action="@routes.DocumentSetController.delete(documentSet.id)?X-HTTP-Method-Override=DELETE">
      <input type="submit" class="btn btn-danger" value="@m("action_delete")" />
    </form>
    
    <a href="@routes.DocumentSetUserController.indexJson(documentSet.id)" class="btn show-sharing-settings" 
      data-create-url="@routes.DocumentSetUserController.create(documentSet.id)"
      data-delete-url-pattern="@routes.DocumentSetUserController.delete(documentSet.id, "{0}")"
      data-is-admin="@viewer.isAdministrator"
      data-is-public="@documentSet.isPublic"
      data-update-url="@routes.DocumentSetController.update(documentSet.id)?X-HTTP-Method-Override=PUT">
      <i class="icon-share"></i>
      @m("share")
    </a>

    <a class="btn"
      data-remote="@routes.DocumentSetExportController.index(documentSet.id)"
      data-toggle="modal"
      data-target="#export-modal">
      <i class="icon-download"></i>
      @m("export")
    </a>
    <h2><a href="@routes.DocumentSetController.show(documentSet.id)">@documentSet.title</a></h2>
    <h3>
      @(documentSet.query match {
        case Some(query) => m("subtitle.query", query)
        case None => m("subtitle.other")
      })
    </h3>
    <p class="status">
      <span class="document-count">@m("document_count", documentSet.documentCount)</span>
      @if(documentSet.documentProcessingErrorCount > 0) {
        <a class="error-list" href="@routes.DocumentProcessingErrorController.index(documentSet.id)" data-toggle="modal" data-target="#error-list-modal">@m("error_count", documentSet.documentProcessingErrorCount)</a>
      }
    </p>
  </li>
}
